#coding=utf-8
import os
Import('env')

env = env.Clone()

# 查找并执行内层SConscript
objs = []
objs += Object(Glob("*.c"))

cwd = env["project_root"]

list = os.listdir(cwd)
for d in list:
    path = os.path.join(cwd, d)
    if os.path.isfile(os.path.join(path, 'SConscript')):
        objs = objs + SConscript(os.path.join(d, 'SConscript'), variant_dir="build/" + d, duplicate=0)

Return('objs')